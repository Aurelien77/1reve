{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aurel\\\\Desktop\\\\test_site_piano.back\\\\Test_site_piano\\\\AurelienMonceau_7_20042021-master\\\\frontend\\\\src\\\\pages\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../helpers/AuthContext\";\nimport logo from \"../logos/formes2.gif\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [email, setemail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const {\n    setAuthState\n  } = useContext(AuthContext);\n  let history = useHistory();\n\n  const login = () => {\n    const data = {\n      username: username,\n      email: email,\n      password: password\n    };\n    axios.post(\"http://localhost:3001/auth/login\", data).then(response => {\n      if (response.data.error) {\n        alert(response.data.error);\n      } else {\n        localStorage.setItem(\"accessToken\", response.data.token);\n        setAuthState({\n          username: response.data.username,\n          email: response.data.email,\n          id: response.data.id,\n          admin: response.data.admin,\n          //tous ce qui est dans r√©ponse concernant admin\n          status: true\n        });\n        history.push(\"/\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex background\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loginContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"fond\",\n        src: logo,\n        alt: \"Logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: event => {\n          setemail(event.target.value);\n          setUsername(\"Bienvenueüéπ\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        value: \"Mon Profil\",\n        onChange: event => {\n          setUsername(event.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        onChange: event => {\n          setPassword(event.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"boutlog\",\n        onClick: login,\n        children: [\" \", \"Login\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"uFPLuXYvKn78BN7ot56YEtb43SI=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/aurel/Desktop/test_site_piano.back/Test_site_piano/AurelienMonceau_7_20042021-master/frontend/src/pages/Login.js"],"names":["React","useState","useContext","axios","useHistory","AuthContext","logo","Login","username","setUsername","email","setemail","password","setPassword","setAuthState","history","login","data","post","then","response","error","alert","localStorage","setItem","token","id","admin","status","push","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../helpers/AuthContext\";\nimport logo from \"../logos/formes2.gif\";\nfunction Login() {\n  const [username, setUsername] = useState(\"\");\n  const [email, setemail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const { setAuthState } = useContext(AuthContext);\n\n  let history = useHistory();\n\n  const login = () => {\n    const data = { username: username, email: email, password: password };\n    axios.post(\"http://localhost:3001/auth/login\", data).then((response) => {\n      if (response.data.error) {\n        alert(response.data.error);\n      } else {\n        localStorage.setItem(\"accessToken\", response.data.token);\n        setAuthState({\n          username: response.data.username,\n          email: response.data.email,\n          id: response.data.id,\n          admin: response.data.admin, //tous ce qui est dans r√©ponse concernant admin\n          status: true,\n        });\n        history.push(\"/\");\n      }\n    });\n  };\n\n  return (\n    <div className=\"flex background\">\n      <div className=\"loginContainer\">\n        <img className=\"fond\" src={logo} alt=\"Logo\" />\n\n        <label>Email:</label>\n        <input\n          type=\"text\"\n          onChange={(event) => {\n            setemail(event.target.value);\n            setUsername(\"Bienvenueüéπ\");\n          }}\n        />\n\n        <input\n          type=\"hidden\"\n          value=\"Mon Profil\"\n          onChange={(event) => {\n            setUsername(event.target.value);\n          }}\n        />\n        <label>Password:</label>\n        <input\n          type=\"password\"\n          onChange={(event) => {\n            setPassword(event.target.value);\n          }}\n        />\n\n        <button className=\"boutlog\" onClick={login}>\n          {\" \"}\n          Login{\" \"}\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}